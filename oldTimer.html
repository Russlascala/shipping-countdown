<h1>Old timer - Validated</h1>

<div id="count-down-Timer" class="commentPLusONEDAys" style="color: #DEC38E;">FREE delivery <span id="shipBefore4" style="font-weight: bold;color: #FFC543;"></span>. <div>Order within <strong style="color:#e15e5e;">0.00.00</strong> </div></div>

<script>



/* jshint esversion: 6 */



console.log("timer script running");


  var CountDownZone = document.querySelector('#count-down-Timer strong'); 
  var TimeTarget = 16;

function pad(n, len) { 
  let s = n.toString();
  return '0'.repeat(Math.max(len - s.length, 0)) + s;
}

var timerRunning = setInterval(countDown, 1000);
let localTime = new Date();              
let utcTime   = localTime.getUTCHours();  
let estTime   = new Date();

function countDown() {
  

  
    var today = new Date();
    if (today.isDstObserved()) { 
        estTime.setHours(utcTime-4);      
    }else{
        estTime.setHours(utcTime-5); 
    }
      


  if ((estTime.getDay() > 0) && (estTime.getDay() < 6) && (estTime.getHours() < TimeTarget)){                     
    let count_HM = [], hrs  = (TimeTarget - 1) - estTime.getHours(), mins = 59 - estTime.getMinutes(), secs = 59 - estTime.getSeconds();

    if (hrs > 0)             { count_HM.push(hrs + ' hour(s)'); }
    if (hrs > 0 || mins > 0) { count_HM.push(pad(mins, 2)+ ' minute(s)'); }
    count_HM.push(pad(secs, 2)+ ' second(s)');

    CountDownZone.textContent = count_HM.join(' - ');
   
    var tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);

   
    document.getElementById('shipBefore4').textContent = tomorrow.toDateString();
  }

  else {
    
    console.log("the day= " + (estTime.getDay()));
    console.log("the hours= " + (estTime.getHours()));
    console.log("target time=  " + TimeTarget);
    var theDate = new Date();
    if ( (estTime.getDay() > 0) && (estTime.getDay() < 5)) {

        theDate.setDate(theDate.getDate() + 2);
        document.getElementById('count-down-Timer').textContent = 'Expected Delivery: ' + theDate.toDateString();
        document.getElementById('count-down-Timer').style.fontWeight='bold';
        document.getElementById('count-down-Timer').style.color="#006f02";
        clearInterval(timerRunning);
        } else if((estTime.getDay == 5) && (estTime.getHours() < TimeTarget) ){
          theDate.setDate(theDate.getDate() + 2);
          document.getElementById('count-down-Timer').textContent = 'Expected Delivery: ' + theDate.toDateString();
          document.getElementById('count-down-Timer').style.fontWeight='bold';
          document.getElementById('count-down-Timer').style.color="#006f02";
          clearInterval(timerRunning);
        }
        else if((estTime.getDay == 5) && (estTime.getHours() > TimeTarget) ){
          document.getElementById('count-down-Timer').textContent = '';
          clearInterval(timerRunning);
        }
        else{
        document.getElementById('count-down-Timer').textContent = '';
        clearInterval(timerRunning);

    }
  }
  
}





Date.prototype.stdTimezoneOffset = function () {
    var jan = new Date(this.getFullYear(), 0, 1);
    var jul = new Date(this.getFullYear(), 6, 1);
    return Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());
};

Date.prototype.isDstObserved = function () {
    return this.getTimezoneOffset() < this.stdTimezoneOffset();
};

var today = new Date();
if (today.isDstObserved()) { 
    console.log ("Daylight saving time!"); 
}else{
    console.log ("NOT Daylight saving time!"); 
}






</script>